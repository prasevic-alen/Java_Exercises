<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="templates/template.xhtml">
      <ui:define name="title">Displaying all Authors</ui:define>
      <ui:define name="top">Displaying all Authors</ui:define>
      <ui:define name="content">
        <h:form id="authorListForm"> 
                <h:dataTable value="#{authorBean.allAuthors}" var="author">
                    <h:column headerClass="dataTableHeader" styleClass="dataTableCell">
                        <f:facet name="header">ID</f:facet>
                        <h:outputText value="#{author.id}" />
                    </h:column>
        
                    <h:column headerClass="dataTableHeader" styleClass="dataTableCell">
                        <f:facet name="header">Name</f:facet>
                        <h:outputText value="#{author.name}" />
                    </h:column>
                    
                    <h:column headerClass="dataTableHeader" styleClass="dataTableCell">
                        <h:commandButton value="Delete" action="#{authorBean.deleteAuthor(author)}" 
                                         onclick="return confirm('Are you sure you want to delete this document?')" styleClass="rightButton"/>
                    </h:column>
                    <f:facet name="footer">
                        <h:commandButton value="Add author" action="addAuthor" styleClass="myButton" ></h:commandButton>
                        <h:commandButton value="Assign author" action="assignAuthor" styleClass="myButton" ></h:commandButton>
                        <h:commandButton value="Back" action="#{authorBean.goToIndex}" styleClass="myButton" ></h:commandButton>
                        
                    </f:facet>
                </h:dataTable>
        </h:form>

        <h:form>

            <h:panelGroup id="messagesGroup">
                <ui:repeat value="#{facesContext.messageList}" var="message">
                    <ul class="myMessages #{message.severity.toString().toLowerCase()}">
                        <li>
                            <h:outputText value="#{message.summary}" />
                            <h:outputText value="#{message.detail}" escape="false"/>
                        </li>
                    </ul>
                </ui:repeat>
            </h:panelGroup>
        </h:form>
      
    </ui:define>
    </ui:composition>
</html>
